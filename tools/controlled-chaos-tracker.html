<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Controlled Chaos Tracker | Cook Anything Kitchen</title>
  <link rel="icon" href="../images/logo.svg" type="image/svg+xml" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
<header class="header">
  <div class="logo">
    <a href="../index.html"><img src="../images/logo.svg" alt="Cook Anything Kitchen logo"></a>
  </div>
  <nav class="nav-links">
    <a href="../index.html">Home</a>
    <a href="https://www.skool.com/cook-anything-kitchen-9636/about?ref=a42cb417403c47368cddd32ba708fd26">Learn To Cook!</a>

    <div class="dropdown">
      <button class="dropbtn">Resources ▾</button>
      <div class="dropdown-content">

        <div class="dropdown-sub">
          <a href="index.html" class="dropbtn-sub">Tools ▸</a>
          <div class="dropdown-content-sub">
            <a href="../recipe-builder.html">Recipe Builder</a>
            <a href="flavor-compass.html">Flavor Compass</a>
            <a href="controlled-chaos-tracker.html">Controlled Chaos Tracker</a>
            <a href="flavor-equation-builder.html">Flavor Equation Builder</a>
          </div>
        </div>

<div class="dropdown-sub">
  <button class="dropbtn-sub" type="button">Downloads ▸</button>
  <div class="dropdown-content-sub">
    <a href="../downloads/beginner-cooking-terms-glossary.pdf">Beginner Cooking Terms</a>
    <a href="../downloads/beginner-kitchen-essentials-checklist.pdf">Kitchen Essentials</a>
    <a href="../downloads/first-week-cooking-confidence-challenge.pdf">Cooking Confidence Challenge</a>
    <a href="../downloads/flavor-maps.pdf">Flavor Maps</a>
    <a href="../downloads/flavor-playbook.pdf">Flavor Playbook</a>
    <a href="../downloads/pantry-starter-guide.pdf">Pantry Starter Guide</a>
  </div>
</div>

      </div>
    </div>

    <a href="../license.html">License</a>
  </nav>
</header>

  <main>
    <section class="tool-card">
      <h1>The Controlled Chaos Tracker</h1>
      <p class="subtitle">Record, reflect, and learn from creative experiments.</p>

      <form id="chaosForm">
        <label>Experiment Title</label>
        <input type="text" id="title" placeholder="e.g., Over-Salted Tomato Sauce" required />

        <label>Date</label>
        <input type="text" id="date" readonly />

        <label>Rule Broken</label>
        <select id="rule">
          <option>Too Salty</option>
          <option>Over-Acidic</option>
          <option>Too Sweet</option>
          <option>Burnt</option>
          <option>Clashing Pairing</option>
          <option>Unusual Texture</option>
          <option>Other</option>
        </select>

        <label>Prediction / Intention</label>
        <textarea id="prediction" placeholder="What outcome did you expect?"></textarea>

        <label>Image URL (optional)</label>
        <input type="url" id="image" placeholder="https://example.com/image.jpg" />

        <label>Before Taste</label>
        <textarea id="beforeTaste"></textarea>

        <label>After Taste</label>
        <textarea id="afterTaste"></textarea>

        <label>Texture</label>
        <select id="texture">
          <option>Soft</option><option>Crunchy</option><option>Sticky</option>
          <option>Oily</option><option>Crisp</option><option>Gritty</option><option>Other</option>
        </select>

        <label>Aroma</label>
        <select id="aroma">
          <option>Sharp</option><option>Flat</option><option>Smoky</option>
          <option>Sweet</option><option>Earthy</option><option>Other</option>
        </select>

        <div class="sliders">
          <div class="slider-group">
            <label>Balance <output id="balanceValue">5</output></label>
            <input type="range" min="1" max="10" value="5" id="balance" />
          </div>
          <div class="slider-group">
            <label>Surprise Factor <output id="surpriseValue">5</output></label>
            <input type="range" min="1" max="10" value="5" id="surprise" />
          </div>
          <div class="slider-group">
            <label>Enjoyability <output id="enjoyValue">5</output></label>
            <input type="range" min="1" max="10" value="5" id="enjoy" />
          </div>
          <div class="slider-group">
            <label>Chaos Level <output id="chaosValue">5</output></label>
            <input type="range" min="1" max="10" value="5" id="chaos" />
          </div>
        </div>

        <div class="outcome">
          <label><input type="radio" name="outcome" value="Controlled Success" checked /> ✅ Controlled Success</label>
          <label><input type="radio" name="outcome" value="Partial Success" /> ⚠️ Partial Success</label>
          <label><input type="radio" name="outcome" value="Full Chaos" /> ❌ Full Chaos</label>
        </div>

        <label>Reflection</label>
        <textarea id="reflection" placeholder="What did this experiment teach you about control vs. creativity?"></textarea>

        <div class="buttons">
          <button type="button" id="saveBtn">Save Entry</button>
          <button type="button" id="exportBtn">Export TXT</button>
          <button type="button" id="clearBtn">Clear Form</button>
        </div>
      </form>
    </section>

    <section class="chart-container">
      <h2>Your Chaos Signature</h2>
      <canvas id="chaosChart" width="300" height="300"></canvas>
    </section>

    <section class="recent">
      <h2>Recent Experiments</h2>
      <div id="recentEntries"></div>
    </section>
  </main>

  <script>
    document.getElementById('date').value = new Date().toLocaleDateString();

    const sliders = ['balance', 'surprise', 'enjoy', 'chaos'];
    sliders.forEach(id => {
      const slider = document.getElementById(id);
      const output = document.getElementById(id + 'Value');
      slider.oninput = () => output.textContent = slider.value;
    });

    let ctx = document.getElementById('chaosChart').getContext('2d');
    let chaosChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['Balance', 'Surprise', 'Enjoyability', 'Chaos'],
        datasets: [{
          label: 'Chaos Signature',
          data: [5, 5, 5, 5],
          backgroundColor: 'rgba(96,165,250,0.2)',
          borderColor: '#60a5fa',
          borderWidth: 2
        }]
      },
      options: {
        scales: {
          r: {
            beginAtZero: true,
            max: 10,
            grid: { color: '#ddd' },
            angleLines: { color: '#eee' },
            pointLabels: { color: '#111' }
          }
        },
        plugins: { legend: { display: false } }
      }
    });

    document.getElementById('saveBtn').addEventListener('click', () => {
      const entry = {
        title: document.getElementById('title').value,
        date: document.getElementById('date').value,
        rule: document.getElementById('rule').value,
        prediction: document.getElementById('prediction').value,
        image: document.getElementById('image').value,
        beforeTaste: document.getElementById('beforeTaste').value,
        afterTaste: document.getElementById('afterTaste').value,
        texture: document.getElementById('texture').value,
        aroma: document.getElementById('aroma').value,
        balance: document.getElementById('balance').value,
        surprise: document.getElementById('surprise').value,
        enjoy: document.getElementById('enjoy').value,
        chaos: document.getElementById('chaos').value,
        outcome: document.querySelector('input[name="outcome"]:checked').value,
        reflection: document.getElementById('reflection').value
      };

      if (!entry.title.trim()) {
        alert("Please enter an experiment title before saving.");
        return;
      }

      let entries = JSON.parse(localStorage.getItem('chaosEntries') || '[]');
      entries.unshift(entry);
      localStorage.setItem('chaosEntries', JSON.stringify(entries.slice(0, 10)));

      updateRecent();
      updateChart(entry);
      alert("Experiment saved locally!");
    });

    function updateChart(entry) {
      let color;
      if (entry.outcome === "Controlled Success") color = '#86efac';
      else if (entry.outcome === "Partial Success") color = '#facc15';
      else color = '#f87171';

      chaosChart.data.datasets[0].data = [entry.balance, entry.surprise, entry.enjoy, entry.chaos];
      chaosChart.data.datasets[0].backgroundColor = color + '33';
      chaosChart.data.datasets[0].borderColor = color;
      chaosChart.update();
    }

    function updateRecent() {
      const container = document.getElementById('recentEntries');
      const entries = JSON.parse(localStorage.getItem('chaosEntries') || '[]');
      container.innerHTML = '';
      entries.slice(0, 3).forEach(entry => {
        const tagClass = entry.outcome === 'Controlled Success' ? 'success' :
                         entry.outcome === 'Partial Success' ? 'warning' : 'danger';
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <strong>${entry.title}</strong> — ${entry.date}
          <span class="tag ${tagClass}">${entry.outcome}</span>
        `;
        container.appendChild(div);
      });
    }
    updateRecent();

    document.getElementById('exportBtn').addEventListener('click', () => {
      const title = document.getElementById('title').value || 'Experiment';
      let text = `Flavor Experiment Log — ${title}\n\n`;
      text += `Date: ${document.getElementById('date').value}\n`;
      text += `Rule Broken: ${document.getElementById('rule').value}\n`;
      text += `Prediction: ${document.getElementById('prediction').value}\n\n`;
      text += `Before Taste:\n${document.getElementById('beforeTaste').value}\n\n`;
      text += `After Taste:\n${document.getElementById('afterTaste').value}\n\n`;
      text += `Texture: ${document.getElementById('texture').value}\n`;
      text += `Aroma: ${document.getElementById('aroma').value}\n\n`;
      text += `Balance: ${document.getElementById('balance').value}\n`;
      text += `Surprise Factor: ${document.getElementById('surprise').value}\n`;
      text += `Enjoyability: ${document.getElementById('enjoy').value}\n`;
      text += `Chaos Level: ${document.getElementById('chaos').value}\n\n`;
      text += `Outcome: ${document.querySelector('input[name="outcome"]:checked').value}\n\n`;
      text += `Reflection:\n${document.getElementById('reflection').value}\n`;

      const blob = new Blob([text], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = `${title.replace(/\s+/g, '_')}_ChaosLog.txt`;
      a.click();
    });

    document.getElementById('clearBtn').addEventListener('click', () => {
      if (confirm("Clear all form fields?")) {
        document.getElementById('chaosForm').reset();
        document.getElementById('date').value = new Date().toLocaleDateString();
      }
    });
  </script>
  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">
        <a href="../index.html"><img src="../images/logo.svg" alt="Cook Anything Kitchen Logo"></a>
      </div>
      <div class="footer-nav">
        <a href="../index.html">Home</a>
        <a href="https://www.skool.com/cook-anything-kitchen-9636/about?ref=a42cb417403c47368cddd32ba708fd26">Learn To Cook!</a>
        <a href="../recipe-builder.html">Recipe Builder</a>
        <a href="../license.html">License</a>
      </div>
      <p class="footer-copy">&copy; 2025 Cook Anything Kitchen. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>

